@model IEnumerable<SacramentMeetingPlanner.Models.Planner>

@{
    ViewData["Title"] = "Index";
}

<header>
    <a asp-controller="Home" asp-action="Index">
        <img src="/images/logo-header.png" alt="Logo" />
    </a>
</header>

<div class="container-folder">
    <div class="cont">
        <div class="container-menu">
            <ul>
                <li class="create-color"><a asp-controller="Planners" asp-action="Create">Create new plan</a></li>
                <li class="list-color"><a asp-controller="Planners" asp-action="Index">View List</a></li>
                <li class="about-color"><a asp-controller="Speakers" asp-action="Index">Speakers</a></li>
            </ul>
        </div>
        <div class="folder list-color height-specific">



            <div class="cont-list">
                <h1>Planners</h1>

                <p class="sub-menu">
                    <a asp-action="Create">Create New</a>
                </p>

                <form asp-controller="Planners" asp-action="Index" class="filter">
                    <p>
                        Search by Speaker Name: <input type="text" name="SearchString" />
                        <input type="submit" value="Filter" class="btn-filter"/>
                    </p>
                </form>
                <div class="overflow-table">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>
                                    @Html.DisplayNameFor(model => model.MeetingDate)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.PresideLeader)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.ConductingLeader)
                                </th>
                                <th>
                                    Speakers
                                </th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model)
                            {
                                <tr>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.MeetingDate)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.PresideLeader)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.ConductingLeader)
                                    </td>

                                    <td>
                                        @if (item.Speeches != null && item.Speeches.Count > 0)
                                        {
                                            @string.Join(", ", item.Speeches.Select(s => s.Speaker.FullName))
                                        }
                                        else
                                        {
                                            <span>No speeches</span>
                                        }
                                    </td>

                                    <td>

                                        <a asp-action="Details" asp-route-id="@item.Id" class="ancla-list">View Planner</a>

                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>



        </div>
    </div>
</div>
